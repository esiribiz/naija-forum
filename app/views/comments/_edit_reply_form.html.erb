<div id="reply_<%= comment.id %>" class="ml-10 bg-white p-4 rounded-lg shadow-sm mb-3 border-l-2 border-l-[#008751]/50 transition-all duration-300">
  <div class="flex items-start space-x-3">
    <div class="flex-shrink-0">
      <% if comment.user.avatar.attached? %>
        <%= image_tag comment.user.avatar, class: "h-8 w-8 rounded-full ring-2 ring-[#008751]/20" %>
      <% else %>
        <div class="h-8 w-8 rounded-full bg-gradient-to-br from-[#008751] to-[#00b76a] flex items-center justify-center shadow-sm">
          <span class="text-white text-xs font-semibold">
            <%= comment.user.username.first(2).upcase %>
          </span>
        </div>
      <% end %>
    </div>
    
    <div class="flex-grow">
      <div class="flex flex-wrap items-center mb-2">
        <span class="font-semibold text-gray-900 mr-2 text-sm"><%= comment.user.username %></span>
        <%= online_dot(comment.user, class: 'mr-2') %>
        <span class="text-gray-500 text-xs px-2 py-1 rounded-full bg-gray-100">
          <%= time_ago_in_words(comment.created_at) %> ago
        </span>
      </div>
      
      <!-- Inline Edit Form -->
      <div class="bg-green-50 border border-green-200 rounded-lg p-3 shadow-sm">
        <div class="flex items-center mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>
          <h4 class="text-xs font-semibold text-gray-900">Editing Reply</h4>
        </div>
        
        <%= form_with(model: [post, comment], class: "space-y-3") do |f| %>
          <div class="relative">
            <%= f.text_area :content, 
                rows: 3,
                class: "w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 resize-y text-sm",
                placeholder: "✏️ Edit your reply..." %>
          </div>

          <div class="flex justify-end space-x-2 pt-2 border-t border-gray-200">
            <%= link_to post_path(post), 
                    class: "inline-flex items-center px-3 py-1.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 text-xs font-medium shadow-sm",
                    data: { turbo_stream: true } do %>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
              Cancel
            <% end %>
            
            <%= f.submit "💾 Update Reply", 
                class: "inline-flex items-center px-4 py-1.5 border border-transparent rounded-lg text-white font-medium bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 shadow-sm hover:shadow-md text-xs" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>