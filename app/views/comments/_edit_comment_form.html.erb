<div id="comment_<%= comment.id %>" class="bg-white p-5 rounded-xl shadow-md mb-5 border-l-4 border-l-[#008751] transition-all duration-300">
  <div class="flex items-start space-x-4">
    <div class="flex-shrink-0">
      <% if comment.user.avatar.attached? %>
        <%= image_tag comment.user.avatar, class: "h-12 w-12 rounded-full ring-2 ring-[#008751]/20" %>
      <% else %>
        <div class="h-12 w-12 rounded-full bg-gradient-to-br from-[#008751] to-[#00b76a] flex items-center justify-center shadow-sm">
          <span class="text-white text-sm font-semibold">
            <%= comment.user.username.first(2).upcase %>
          </span>
        </div>
      <% end %>
    </div>
    
    <div class="flex-grow">
      <div class="flex flex-wrap items-center mb-2">
        <span class="font-semibold text-gray-900 mr-2"><%= comment.user.username %></span>
        <%= online_dot(comment.user, class: 'mr-2') %>
        <span class="text-gray-500 text-xs px-2 py-1 rounded-full bg-gray-100">
          <%= time_ago_in_words(comment.created_at) %> ago
        </span>
      </div>
      
      <!-- Inline Edit Form -->
      <div class="bg-green-50 border border-green-200 rounded-xl p-4 shadow-sm">
        <div class="flex items-center mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>
          <h4 class="text-sm font-semibold text-gray-900">Editing Comment</h4>
        </div>
        
        <%= form_with(model: [post, comment], class: "space-y-4", data: { turbo_frame: "_top" }) do |f| %>
          <div class="relative">
            <%= f.text_area :content, 
                rows: 4,
                class: "w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 resize-y",
                placeholder: "✏️ Edit your comment..." %>
          </div>

          <div class="flex justify-end space-x-3 pt-3 border-t border-gray-200">
            <%= link_to cancel_edit_post_comment_path(post, comment), 
                    data: { turbo_stream: true },
                    class: "inline-flex items-center px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 text-sm font-medium shadow-sm" do %>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
              Cancel
            <% end %>
            
            <%= f.submit comment.parent_id.present? ? "💾 Update Reply" : "💾 Update Comment", 
                class: "inline-flex items-center px-5 py-2 border border-transparent rounded-xl text-white font-medium bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 shadow-sm hover:shadow-md text-sm" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>